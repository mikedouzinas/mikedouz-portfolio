@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS-based page transitions */
html {
  view-transition-name: root;
}

/* Smooth page transitions using CSS View Transitions API */
@media (prefers-reduced-motion: no-preference) {
  html {
    scroll-behavior: smooth;
  }
  
  /* Fallback for browsers that don't support View Transitions */
  body {
    opacity: 1;
    transition: opacity 0.3s ease-in-out;
  }
  
  body.page-transition {
    opacity: 0;
  }
}

.header {
    @apply fixed top-0 w-full bg-white dark:bg-gray-900 shadow-md z-50;
  }
  
  .headerInner {
    @apply flex justify-between items-center p-8;
  }
  
  .nav {
    @apply flex space-x-8;
  }
  
  .icons {
    @apply flex space-x-4;
  }
  
  .link {
    @apply text-gray-700 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-300 text-xl;
  }

  /* Custom bounce animation for Iris dialog opening */
  @keyframes iris-bounce-in {
    0% {
      transform: scale(0.6) translateY(-40px);
      opacity: 0;
    }
    25% {
      transform: scale(0.8) translateY(-20px);
      opacity: 0.6;
    }
    50% {
      transform: scale(1.08) translateY(-8px);
      opacity: 0.9;
    }
    70% {
      transform: scale(0.95) translateY(4px);
      opacity: 1;
    }
    85% {
      transform: scale(1.02) translateY(-2px);
      opacity: 1;
    }
    100% {
      transform: scale(1) translateY(0);
      opacity: 1;
    }
  }

  /* Custom bounce animation for Iris dialog closing */
  @keyframes iris-bounce-out {
    0% {
      transform: scale(1) translateY(0);
      opacity: 1;
    }
    30% {
      transform: scale(1.05) translateY(-5px);
      opacity: 0.8;
    }
    60% {
      transform: scale(0.9) translateY(10px);
      opacity: 0.5;
    }
    100% {
      transform: scale(0.7) translateY(30px);
      opacity: 0;
    }
  }

  .iris-bounce-in {
    animation: iris-bounce-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
  }

  .iris-bounce-out {
    animation: iris-bounce-out 0.35s cubic-bezier(0.4, 0, 1, 1) forwards;
  }

  /* Remove all borders, outlines, and rings from Iris dialog */
  [role="dialog"] {
    border: none !important;
    outline: none !important;
    box-shadow: 0 25px 50px -12px rgba(0,0,0,0.8) !important;
  }

  [role="dialog"]:focus,
  [role="dialog"]:focus-visible {
    border: none !important;
    outline: none !important;
    box-shadow: 0 25px 50px -12px rgba(0,0,0,0.8) !important;
  }

  /* Override default dialog animations to use our custom bounce */
  /* Force our animations to take precedence over Radix UI defaults */
  [role="dialog"].iris-bounce-in {
    animation: iris-bounce-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards !important;
  }
  
  [role="dialog"].iris-bounce-out {
    animation: iris-bounce-out 0.35s cubic-bezier(0.4, 0, 1, 1) forwards !important;
  }
  
  /* Additional specificity for data-state attributes */
  [role="dialog"][data-state="open"].iris-bounce-in {
    animation: iris-bounce-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards !important;
  }
  
  [role="dialog"][data-state="closed"].iris-bounce-out {
    animation: iris-bounce-out 0.35s cubic-bezier(0.4, 0, 1, 1) forwards !important;
  }

  /* Remove border, outline, and background from CommandItem in Iris - comprehensive fix */
  [cmdk-item],
  [cmdk-item]:hover,
  [cmdk-item]:focus,
  [cmdk-item]:focus-visible,
  [cmdk-item]:active,
  [cmdk-item][data-selected="true"],
  [cmdk-item][aria-selected="true"] {
    outline: 0 !important;
    outline-width: 0 !important;
    outline-style: none !important;
    border: 0 !important;
    border-width: 0 !important;
    box-shadow: none !important;
    -webkit-box-shadow: none !important;
    /* Prevent shifting by maintaining consistent box model */
    margin: 0 !important;
    /* Remove any default background on selection */
    background: transparent !important;
  }
  
  /* Prevent child elements from adding borders */
  [cmdk-item] *,
  [cmdk-item] *:focus,
  [cmdk-item] *:focus-visible {
    outline: 0 !important;
    border: 0 !important;
    box-shadow: none !important;
  }

  /* Remove borders from IrisPalette suggestion items */
  [role="option"],
  [role="option"]:focus,
  [role="option"]:focus-visible,
  [role="option"]:active,
  [role="option"][aria-selected="true"] {
    outline: none !important;
    border: none !important;
    box-shadow: none !important;
    ring: none !important;
  }